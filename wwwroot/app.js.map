{"version":3,"sources":["app.js","backdrop.js","collidable.js","collision-helpers.js","controller.js","difficulty-manager.js","entity-spawner.js","fps-counter.js","game-over-sign.js","game.js","goodie.js","lorry.js","moose.js","object-base.js","particle-cannon.js","particle.js","scene.js","score.js"],"names":["define","exports","module","_game","_interopRequireDefault","obj","__esModule","default","_Game","gameContainer","document","querySelector","game","setupScene","run","_objectBase","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","call","parent","getPrototypeOf","_ObjectBase2","Backdrop","_ObjectBase","scene","this","y","height","element","createDOMElement","style","width","backgroundImage","frameDelta","backgroundPositionY","Collidable","apply","arguments","box_collision","rect1","rect2","x","VK_DOWN_ARROW","VK_UP_ARROW","VK_LEFT_ARROW","VK_RIGHT_ARROW","VK_ENTER","VK_SPACE","Controller","_this","_keys","up","down","right","left","enter","space","$","on","e","keyCode","DifficultyManager","difficulty","Math","log10","multiplier","log","_goodie","_moose","_Goodie","_Moose","EntitySpawner","nextSpawn","frameTime","difficultyMultiplier","difficultyManager","spawnSpeedMultiplier","random","spawnGoodie","spawnBadie","roadPadding","totalWidth","addObject","FpsCounter","bottom","_times","_fps","shift","push","textContent","GameOverSign","_scene","_lorry","_backdrop","_score","_fpsCounter","_entitySpawner","_Scene","_Lorry","_Backdrop","_Score","_FpsCounter","_EntitySpawner","Game","lastFrameTime","performance","now","gameOver","controller","keys","reset","objects","isAlive","update","draw","requestAnimationFrame","bind","_collidable","_particleCannon","_Collidable2","_ParticleCannon","Goodie","_Collidable","particleCannon","_isAlive","removeDOMElement","addScore","fire","top","_collisionHelpers","Lorry","lorrySpeedMultiplier","collidables","filter","o","collidable","collided","collide","Moose","initialX","movingLeft","maxMoveDistance","setGameOver","_particle","_Particle","ParticleCannon","count","Particle","life","speedX","speedY","rotation","rotationSpeed","skew","skewSpeed","backgroundColor","randomColor","rnd","transform","opacity","_controller","_gameOverSign","_difficultyManager","_toConsumableArray","arr","Array","isArray","arr2","from","_Controller","_GameOverSign","_DifficultyManager","Scene","clientWidth","clientHeight","_objects","_gameOver","score","increaseDifficulty","classList","remove","children","concat","forEach","removeChild","add","className","createElement","appendChild","hasChild","some","c","Score","toLocaleString"],"mappings":"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","file":"app.js","sourcesContent":["/* global $ */\nimport Game from 'game';\n\nexport default function() {\n    let gameContainer = document.querySelector('.game-container');\n    let game = new Game(gameContainer);\n    game.setupScene();\n    game.run();\n}\n","import ObjectBase from 'object-base';\n\nexport default class Backdrop extends ObjectBase {\n  constructor(scene) {\n    super();\n    this.scene = scene;\n    this.y = scene.height - 200;\n    this.element = scene.createDOMElement('backdrop');\n    this.element.style.width = scene.width + 'px';\n    this.element.style.height = scene.height + 'px';\n    this.element.style.backgroundImage = 'url(\"/images/backdrop.jpg\")';\n  }\n\n  update(frameDelta) {\n    this.y += .3 * frameDelta;\n  }\n\n  draw() {\n    this.element.style.backgroundPositionY = this.y + 'px';\n  }\n}","import ObjectBase from 'object-base';\n\nexport default class Collidable extends ObjectBase {\n  collide() {\n\n  }\n}","export let box_collision = function(rect1, rect2) {\n  return (rect1.x < rect2.x + rect2.width &&\n     rect1.x + rect1.width > rect2.x &&\n     rect1.y < rect2.y + rect2.height &&\n     rect1.height + rect1.y > rect2.y);\n};","/* global $ */\n\nconst VK_DOWN_ARROW = 40;\nconst VK_UP_ARROW = 38;\nconst VK_LEFT_ARROW = 37;\nconst VK_RIGHT_ARROW = 39;\nconst VK_ENTER = 13;\nconst VK_SPACE = 32;\n\nexport default class Controller {\n  constructor(gameContainer) {\n    this._keys = {\n      up: false,\n      down: false,\n      right: false,\n      left: false,\n      enter: false,\n      space: false\n    };\n\n    $(document).on('keydown', e => {\n      switch(e.keyCode) {\n        case VK_DOWN_ARROW:\n          this._keys.down = true;\n          break;\n        case VK_UP_ARROW:\n          this._keys.up = true;\n          break;\n        case VK_LEFT_ARROW:\n          this._keys.left = true;\n          break;\n        case VK_RIGHT_ARROW:\n          this._keys.right = true;\n          break;\n        case VK_ENTER:\n          this._keys.enter = true;\n          break;\n        case VK_SPACE:\n          this._keys.space = true;\n          break;\n      }\n    });\n\n    $(document).on('keyup', e => {\n      switch(e.keyCode) {\n        case VK_DOWN_ARROW:\n          this._keys.down = false;\n          break;\n        case VK_UP_ARROW:\n          this._keys.up = false;\n          break;\n        case VK_LEFT_ARROW:\n          this._keys.left = false;\n          break;\n        case VK_RIGHT_ARROW:\n          this._keys.right = false;\n          break;\n        case VK_ENTER:\n          this._keys.enter = false;\n          break;\n        case VK_SPACE:\n          this._keys.space = false;\n          break;\n      }\n    });\n  }\n\n  get keys() {\n    return this._keys;\n  }\n}","export default class DifficultyManager {\n  constructor() {\n    this.difficulty = 1;\n  }\n\n  increaseDifficulty() {\n    if(this.difficulty < 10) {\n      this.difficulty++;\n    }\n  }\n\n  reset() {\n    this.difficulty = 1;\n  }\n\n  get spawnSpeedMultiplier() {\n    return Math.log10(this.difficulty);\n  }\n\n  get lorrySpeedMultiplier() {\n    let multiplier = Math.log(this.difficulty);\n    if(multiplier < 1) {\n      multiplier = 1;\n    }\n    return multiplier;\n  }\n}","import ObjectBase from 'object-base';\nimport Goodie from 'goodie';\nimport Moose from 'moose';\n\nexport default class EntitySpawner extends ObjectBase {\n  constructor(scene) {\n    super();\n    this.scene = scene;\n    this.nextSpawn;\n  }\n\n  update(frameDelta, frameTime) {\n    let difficultyMultiplier = this.scene.difficultyManager.spawnSpeedMultiplier;\n    if(!this.nextSpawn) {\n      this.nextSpawn = frameTime + (400 - (200 * difficultyMultiplier));\n    }\n\n    if(this.nextSpawn <= frameTime) {\n      this.nextSpawn = frameTime + (400 - (200 * difficultyMultiplier));\n      \n      if(Math.random() > .3) {\n        this.spawnGoodie();\n      } else {\n        this.spawnBadie();\n      }\n    }\n  }\n\n  spawnGoodie() {\n    const roadPadding = 60;\n    const totalWidth = this.scene.width - roadPadding * 2;\n\n    let x = roadPadding + (Math.random() * totalWidth);\n    let y = -200;\n    \n    this.scene.addObject(new Goodie(this.scene, x, y));\n  }\n\n  spawnBadie() {\n    const roadPadding = 60;\n    const totalWidth = this.scene.width - roadPadding * 2;\n\n    let x = roadPadding + (Math.random() * totalWidth);\n    let y = -200;\n    \n    this.scene.addObject(new Moose(this.scene, x, y));\n  }\n\n  draw() {\n  }\n}","import ObjectBase from 'object-base';\n\nexport default class FpsCounter extends ObjectBase {\n  constructor(scene) {\n    super();\n    this.scene = scene;\n    this.width = 300;\n    this.height = 32;\n    this.element = scene.createDOMElement('fps-counter');\n    this.element.style.right = '16px';\n    this.element.style.bottom = '16px';\n    this.element.style.width = this.width + 'px';\n    this.element.style.height = this.height + 'px';\n    \n    this._times = [];\n    this._fps = 0;\n  }\n\n  update(frameDelta, frameTime) {\n    while(this._times.length > 0 && this._times[0] <= frameTime - 1000) {\n      this._times.shift();\n    }\n    this._times.push(frameTime);\n    this._fps = this._times.length;\n  }\n\n  draw() {\n    this.element.textContent = this._fps;\n  }\n}","export default class GameOverSign {\n  constructor(scene) {\n    this.scene = scene;\n    this.element = scene.createDOMElement('game-over-sign');\n    this.element.textContent = 'Game over';\n  }\n\n  update(frameDelta) {\n  }\n\n  draw() {\n  }\n}","import Scene from 'scene';\nimport Lorry from 'lorry';\nimport Backdrop from 'backdrop';\nimport Score from 'score';\nimport FpsCounter from 'fps-counter';\nimport EntitySpawner from 'entity-spawner';\n\nexport default class Game {\n  constructor(gameContainer) {\n    this.lastFrameTime = performance.now();\n    this.scene = new Scene(gameContainer);\n  }\n\n  setupScene() {\n    this.scene.addObject(new Backdrop(this.scene));\n    this.scene.addObject(new Score(this.scene));\n    this.scene.addObject(new FpsCounter(this.scene));\n    this.scene.addObject(new Lorry(this.scene));\n    this.scene.addObject(new EntitySpawner(this.scene));\n  }\n\n  run() {\n    let frameTime = performance.now();\n    let frameDelta = frameTime - this.lastFrameTime;\n    this.lastFrameTime = frameTime;\n\n    if(!this.scene.gameOver) {\n      for(let i = 0; i < this.scene.objects.length; i++) {\n        let obj = this.scene.objects[i];\n        if(obj.isAlive) {\n          obj.update(frameDelta, frameTime);\n        }\n      }\n\n      for(let i = 0; i < this.scene.objects.length; i++) {\n        let obj = this.scene.objects[i];\n        if(obj.isAlive) {\n          obj.draw(frameDelta, frameTime);\n        }\n      }\n    } else {\n      // We are in game over\n      if(this.scene.controller.keys.space || this.scene.controller.keys.enter) {\n        this.scene.reset();\n        this.setupScene();\n      }\n    }\n\n    requestAnimationFrame(this.run.bind(this));\n  }\n}","import Collidable from 'collidable';\nimport ParticleCannon from 'particle-cannon';\n\nexport default class Goodie extends Collidable {\n  constructor(scene, x, y) {\n    super();\n    this.scene = scene;\n    this.x = x;\n    this.y = y;\n    this.width = 32;\n    this.height = 32;\n    this.element = scene.createDOMElement('goodie');\n    this.element.style.width = this.width + 'px';\n    this.element.style.height = this.height + 'px';\n    this.particleCannon = new ParticleCannon(scene);\n  }\n\n  update(frameDelta) {\n    this.y += .3 * frameDelta;\n\n    const roadPadding = 60;\n    if(this.x > this.scene.width - this.width - roadPadding) {\n      this.x = this.scene.width - this.width - roadPadding;\n    } else if(this.x <= roadPadding) {\n      this.x = roadPadding;\n    }\n\n    if(this.y > this.scene.height) {\n      this._isAlive = false;\n      this.scene.removeDOMElement(this.element);\n    }\n  }\n\n  collide() {\n    if(this.isAlive) {\n      this.scene.addScore(1000);\n      this.particleCannon.fire(this.x + this.width / 2, this.y + this.width / 2, 40);\n    }\n\n    this._isAlive = false;\n    this.scene.removeDOMElement(this.element);\n  }\n\n  draw() {\n    this.element.style.left = this.x + 'px';\n    this.element.style.top = this.y + 'px';\n  }\n}","import ObjectBase from 'object-base';\nimport Collidable from 'collidable';\nimport { box_collision } from 'collision-helpers';\n\nexport default class Lorry extends ObjectBase {\n  constructor(scene) {\n    super();\n    this.scene = scene;\n    this.x = scene.width / 2;\n    this.y = scene.height - 200;\n    this.width = 65;\n    this.height = 150;\n    this.element = scene.createDOMElement('lorry');\n    this.element.style.width = this.width + 'px';\n    this.element.style.height = this.height + 'px';\n  }\n\n  update(frameDelta) {\n    let difficultyMultiplier = this.scene.difficultyManager.lorrySpeedMultiplier;\n\n    let controller = this.scene.controller;\n    if(controller.keys.left) {\n      this.x -= .5 * frameDelta * difficultyMultiplier;\n    } else if(controller.keys.right) {\n      this.x += .5 * frameDelta * difficultyMultiplier;\n    }\n\n    if(controller.keys.up) {\n      this.y -= .3 * frameDelta * difficultyMultiplier;\n    } else if(controller.keys.down) {\n      this.y += .5 * frameDelta * difficultyMultiplier;\n    }\n\n    const roadPadding = 60;\n    if(this.x > this.scene.width - this.width - roadPadding) {\n      this.x = this.scene.width - this.width - roadPadding;\n    } else if(this.x <= roadPadding) {\n      this.x = roadPadding;\n    }\n\n    if(this.y > this.scene.height - this.height) {\n      this.y = this.scene.height - this.height;\n    } else if(this.y <= 0) {\n      this.y = 0;\n    }\n\n    let collidables = this.scene.objects.filter(o => o instanceof Collidable);\n\n    for(let i = 0; i < collidables.length; i++) {\n      let collidable = collidables[i];\n      if(collidable.isAlive) {\n        let collided = box_collision(collidable, this);\n        if(collided) {\n          collidable.collide();\n        }\n      }\n    }\n  }\n\n  draw() {\n    this.element.style.left = this.x + 'px';\n    this.element.style.top = this.y + 'px';\n  }\n}","import Collidable from 'collidable';\n\nexport default class Moose extends Collidable {\n  constructor(scene, x, y) {\n    super();\n    this.scene = scene;\n    this.x = x;\n    this.y = y;\n    this.initialX = x;\n    this.movingLeft = Math.random() > .5;\n    this.width = 64;\n    this.height = 58;\n    this.element = scene.createDOMElement('moose');\n    this.element.style.width = this.width + 'px';\n    this.element.style.height = this.height + 'px';\n  }\n\n  update(frameDelta) {\n    this.y += .3 * frameDelta;\n\n    if(this.movingLeft) {\n      this.x -= .1 * frameDelta;\n    } else {\n      this.x += .1 * frameDelta;\n    }\n\n    const maxMoveDistance = 60;\n    if(this.x < this.initialX - maxMoveDistance) {\n      this.x = this.initialX - maxMoveDistance;\n      this.movingLeft = false;\n    } else if(this.x > this.initialX + maxMoveDistance) {\n      this.x = this.initialX + maxMoveDistance;\n      this.movingLeft = true;\n    }\n\n    const roadPadding = 60;\n    if(this.x > this.scene.width - this.width - roadPadding) {\n      this.x = this.scene.width - this.width - roadPadding;\n      this.movingLeft = true;\n    } else if(this.x <= roadPadding) {\n      this.x = roadPadding;\n      this.movingLeft = false;\n    }\n\n    if(this.y > this.scene.height) {\n      this._isAlive = false;\n      this.scene.removeDOMElement(this.element);\n    }\n  }\n\n  collide() {\n    if(this.isAlive) {\n      this.scene.setGameOver();\n      this._isAlive = false;\n    }\n  }\n\n  draw() {\n    this.element.style.left = this.x + 'px';\n    this.element.style.top = this.y + 'px';\n  }\n}","export default class Game {\n  constructor() {\n    this._isAlive = true;\n  }\n\n  get isAlive() {\n    return this._isAlive;\n  }\n\n  update() {\n\n  }\n\n  draw() {\n\n  }\n}","import Particle from \"particle\";\n\nexport default class ParticleCannon {\n  constructor(scene) {\n    this.scene = scene;\n  }\n\n  fire(x, y, count) {\n    for(let i = 0; i < count; i++) {\n      this.scene.addObject(new Particle(this.scene, x, y));\n    }\n  }\n\n  update() {\n\n  }\n\n  draw() {\n\n  }\n}","import ObjectBase from 'object-base';\n\nexport default class Particle extends ObjectBase {\n  constructor(scene, x, y) {\n    super();\n    this.scene = scene;\n    this.x = x;\n    this.y = y;\n    this.life = Math.random() * 100 + 100;\n    this.speedX = Math.random() * 2 - 1;\n    this.speedY = Math.random() * 2 - 1;\n    this.width = Math.random() * 16;\n    this.height = this.width * 0.4;\n    this.rotation = Math.random() * 360;\n    this.rotationSpeed = Math.random() * 4;\n    this.skew = Math.random() * 80 - 40;\n    this.skewSpeed = this.rotationSpeed / 2;\n    this.element = scene.createDOMElement('particle');\n    this.element.style.width = this.width + 'px';\n    this.element.style.height = this.height + 'px';\n    this.element.style.backgroundColor = this.randomColor();\n  }\n\n  randomColor() {\n    let rnd = Math.random();\n\n    if(rnd > .66) {\n      return 'red';\n    } else if(rnd > .33) {\n      return 'blue';\n    } else {\n      return 'green';\n    }\n  }\n\n  update(frameDelta) {\n    this.x -= this.speedX * frameDelta * .5;\n    this.y -= this.speedY * frameDelta * .5;\n    this.rotation += this.rotationSpeed * frameDelta;\n    \n    this.skew += this.skewSpeed * frameDelta;\n    if(this.skew > 40) {\n      this.skew = -40;\n    }\n\n    this.life -= frameDelta * .1;\n    if(this.life < 0) {\n      this._isAlive =false;\n      this.scene.removeDOMElement(this.element);\n    }\n  }\n\n  draw() {\n    this.element.style.left = this.x + 'px';\n    this.element.style.top = this.y + 'px';\n    this.element.style.transform = `rotate(${this.rotation}deg) skew(${this.skew}deg,${this.skew}deg)`;\n    this.element.style.opacity = this.life / 200;\n  }\n}","import Controller from 'controller';\nimport GameOverSign from 'game-over-sign';\nimport DifficultyManager from 'difficulty-manager';\n\nexport default class Scene {\n  constructor(gameContainer) {\n    this.gameContainer = gameContainer;\n    this.width = gameContainer.clientWidth;\n    this.height = gameContainer.clientHeight;\n    this._score = 0;\n    this._objects = [];\n    this._gameOver = false;\n    this._controller = new Controller();\n    this.difficultyManager = new DifficultyManager()\n  }\n\n  get objects() {\n    return this._objects;\n  }\n\n  get controller() {\n    return this._controller;\n  }\n\n  get score() {\n    return this._score;\n  }\n\n  get gameOver() { \n    return this._gameOver;\n  }\n\n  addScore(score) {\n    this._score += score;\n    if(this._score % 5000 === 0) {\n      this.difficultyManager.increaseDifficulty();\n    }\n  }\n\n  addObject(obj) {\n    this._objects.push(obj);\n  }\n\n  reset() {\n    this._objects = [];\n    this._gameOver = false;\n    this._score = 0;\n    this.difficultyManager.reset();\n\n    this.gameContainer.classList.remove('game-over');\n\n    let children = [...this.gameContainer.children];\n    children.forEach(element => this.gameContainer.removeChild(element));\n  }\n\n  setGameOver() {\n    this._gameOver = true;\n    this.addObject(new GameOverSign(this));\n    this.gameContainer.classList.add('game-over');\n  }\n\n  createDOMElement(className) {\n    let element = document.createElement('div');\n    element.classList.add('game-object');\n    element.classList.add(className);\n    this.gameContainer.appendChild(element);\n    return element;\n  }\n\n  removeDOMElement(element) {\n    let children = [...this.gameContainer.children];\n    let hasChild = children.some(c => c === element);\n    if(hasChild)\n      this.gameContainer.removeChild(element);\n  }\n}","import ObjectBase from 'object-base';\n\nexport default class Score extends ObjectBase {\n  constructor(scene) {\n    super();\n    this.scene = scene;\n    this.width = 300;\n    this.height = 32;\n    this.element = scene.createDOMElement('score');\n    this.element.style.right = '16px';\n    this.element.style.top = '16px';\n    this.element.style.width = this.width + 'px';\n    this.element.style.height = this.height + 'px';\n  }\n\n  update(frameDelta) {\n\n  }\n\n  draw() {\n    this.element.textContent = this.scene.score.toLocaleString();\n  }\n}"]}